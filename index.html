<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Reveal Builder — Lightweight Animation Engine</title>

<!-- ✅ include official reveal css + js -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ashfad0273/Entrance-Animation@main/reveal.css?v=3">
<script src="https://cdn.jsdelivr.net/gh/ashfad0273/Entrance-Animation@main/reveal-engine.min.js?v=3"></script>

<style>
:root{
  --bg:#0b1220;--panel:#141c2b;--muted:#9fb0c7;--text:#e6edf6;
  --accent:#22c55e;--accent2:#3b82f6;--border:#243047;--code:#0b1220;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Inter,Arial}
.layout{display:flex;min-height:100vh}
aside{width:400px;background:var(--panel);border-right:1px solid var(--border);padding:22px;display:flex;flex-direction:column;gap:16px}
h1{margin:0 0 8px;font-size:18px;color:var(--muted);font-weight:700;letter-spacing:.3px}
.group{display:grid;gap:8px}
label{font-size:12px;color:#c7d3e5;font-weight:600}
select,input,textarea{
  background:#101829;color:var(--text);border:1px solid var(--border);
  border-radius:8px;padding:10px 12px;font-size:14px;outline:none; width: 100%;
}
input[type="number"]{appearance:textfield}
.row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.actions{display:grid;gap:8px;margin-top:6px}
button{
  background:var(--accent);color:#08111f;font-weight:800;border:0;padding:10px 12px;
  border-radius:9px;cursor:pointer;transition:transform .06s ease,opacity .2s ease
}
button:hover{opacity:.95}button:active{transform:translateY(1px)}
.is-outline{background:transparent;color:var(--text);border:1px solid var(--border)}
.is-blue{background:var(--accent2);color:#fff}
main{flex:1;display:flex;align-items:center;justify-content:center;padding:28px}
.preview{width:min(920px,100%);background:var(--panel);border:1px solid var(--border);border-radius:16px;
  padding:32px;min-height:300px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
.preview h2{margin:0 0 16px;color:#cfe0ff;font-size:16px;opacity:.9}
.preview-text{background:#0e1729;border:1px dashed #2b3a57;color:#cfe0ff;padding:24px;border-radius:12px;
  font-size:2.25rem;line-height:1.25;letter-spacing:.2px}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);padding:20px;z-index:10}
.sheet{width:min(980px,100%);background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:18px}
.tabs{display:flex;gap:16px;border-bottom:1px solid var(--border);margin-bottom:10px}
.tab{padding:8px 2px;cursor:pointer;color:#b7c6da;font-weight:700}
.tab.is-active{color:var(--accent);border-bottom:2px solid var(--accent)}
pre{background:var(--code);color:#d0e2ff;border:1px solid var(--border);border-radius:10px;padding:12px;overflow:auto;font-size:13px;line-height:1.5;max-height:60vh}
.toolbar{display:flex;gap:8px;justify-content:flex-end;margin:8px 0 14px}
.badge{display:inline-flex;gap:8px;align-items:center;font-size:12px;color:#9fb0c7}
code.inline{background:#0e1628;border:1px solid var(--border);padding:1px 6px;border-radius:6px}
.code-block {
  background:#0e1729;
  border:1px solid #2b3a57;
  color:#cfe0ff;
  padding:12px;
  border-radius:8px;
  font-family:ui-monospace,Menlo,monospace;
  font-size:13px;
  overflow:auto;
}

</style>
</head>
<body>

<div class="layout">
  <aside>
    <h1>Reveal — Builder</h1>
    <div class="group">
      <label>Animation Type</label>
      <select class="js-animType">
        <option>fade</option><option>slide</option><option>scale</option><option>rotate</option>
        <option>bounce</option><option>blur</option><option>clip</option><option>underline</option>
        <option>shine</option><option>desat</option><option>type</option><option>scramble</option>
      </select>
    </div>
    <div class="row">
      <div class="group">
        <label>Mode</label>
        <select class="js-mode"><option>element</option><option selected>word</option><option>char</option></select>
      </div>
      <div class="group">
        <label>Direction</label>
        <select class="js-direction"><option>up</option><option>down</option><option>left</option><option>right</option></select>
      </div>
    </div>
    <div class="row">
      <div class="group">
        <label>Duration (ms)</label><input class="js-duration" type="number" value="700">
      </div>
      <div class="group">
        <label>Stagger (ms)</label><input class="js-stagger" type="number" value="90">
      </div>
    </div>
    <div class="row">
      <div class="group">
        <label>Easing</label>
        <select class="js-ease">
          <option>ease-out</option><option>ease-in</option><option>ease-in-out</option><option>linear</option>
          <option value="cubic-bezier(0.22,1,0.36,1)">expo-out</option>
        </select>
      </div>
      <div class="group">
        <label>Amount (px/deg)</label><input class="js-amount" type="number" value="80">
      </div>
    </div>
    <div class="row">
      <div class="group">
        <label>Pattern</label>
        <select class="js-pattern"><option>sequential</option><option>centerOut</option><option>random</option></select>
      </div>
      <div class="group">
        <label>Exit Animation</label>
        <select class="js-exit"><option>none</option><option>fadeOut</option><option>slideOut</option><option>shrinkOut</option><option>dissolveOut</option></select>
      </div>
    </div>
    <div class="group">
      <label>Exit Delay (ms)</label><input class="js-exitDelay" type="number" value="0">
    </div>
    <div class="group">
      <label>Preview Text</label>
      <textarea class="js-text" rows="2">Building lightweight animation libraries is fun and fast</textarea>
    </div>
    <div class="actions">
      <button class="js-preview is-outline">Preview</button>
      <button class="js-generate is-blue">Generate Code</button>
    </div>
    <div class="badge"><span>Engine: <code class="inline">reveal</code> · Vanilla JS · No deps</span></div>
  </aside>

  <main>
    <div class="preview">
      <h2>Preview</h2>
      <div class="preview-text js-previewText">Building lightweight animation libraries is fun and fast</div>
    </div>
  </main>
</div>

<div class="modal js-modal">
  <div class="sheet">
    <h2 style="margin:0 0 8px;color:#9fb0c7;font-size:15px;">How to Use</h2>
    <div class="toolbar" style="margin-bottom:14px;">
      <button class="is-outline js-close">Close</button>
    </div>

    <div class="section">
      <p style="color:#cfe0ff;font-weight:600;">1️⃣ Include CSS + JS from CDN</p>
      <pre class="code-block"><code class="js-cdn-code">&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ashfad0273/Entrance-Animation@main/reveal.css?v=3"&gt;
&lt;script src="https://cdn.jsdelivr.net/gh/ashfad0273/Entrance-Animation@main/reveal-engine.min.js?v=3"&gt;&lt;/script&gt;</code></pre>
      <button class="is-outline js-copy-cdn">Copy CDN</button>
    </div>

    <div class="section" style="margin-top:18px;">
      <p style="color:#cfe0ff;font-weight:600;">2️⃣ Add Reveal Classes to Any Element</p>
      <pre class="code-block"><code class="js-example-code"></code></pre>
      <button class="is-outline js-copy-example">Copy Example</button>
    </div>
  </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', () => {
  const $ = (s, r = document) => r.querySelector(s);

  const ui = {
    type: $('.js-animType'),
    mode: $('.js-mode'),
    direction: $('.js-direction'),
    duration: $('.js-duration'),
    stagger: $('.js-stagger'),
    ease: $('.js-ease'),
    amount: $('.js-amount'),
    pattern: $('.js-pattern'),
    exit: $('.js-exit'),
    exitDelay: $('.js-exitDelay'),
    text: $('.js-text'),
    previewContainer: $('.preview'),
    btnPreview: $('.js-preview'),
    btnGenerate: $('.js-generate'),
    modal: $('.js-modal'),
    modalClose: $('.js-close'),
    panel: $('aside'),
    cdnCode: $('.js-cdn-code'),
    exampleCode: $('.js-example-code'),
    btnCopyCdn: $('.js-copy-cdn'),
    btnCopyExample: $('.js-copy-example'),
  };

  // Store the original preview element to clone from it later
  const originalPreviewEl = $('.js-previewText');

  /**
   * Generates a string of classes based on UI selections.
   */
  function getClassListFromUI() {
    const c = ['preview-text', 'js-previewText']; // Base classes
    c.push(`reveal-${ui.type.value}`);
    if (ui.mode.value === 'word') c.push('reveal-word');
    else if (ui.mode.value === 'char') c.push('reveal-char');
    c.push(`reveal-${ui.direction.value}`);
    if (ui.pattern.value === 'random') c.push('reveal-random');
    else if (ui.pattern.value === 'centerOut') c.push('reveal-center');
    return c.join(' ');
  }

  /**
   * Applies the selected animation settings to the preview element.
   * Clones the element to reliably replay the animation.
   */
  function applyPreview() {
    const newPreviewEl = originalPreviewEl.cloneNode(false); // Clone without children

    newPreviewEl.textContent = ui.text.value;
    newPreviewEl.className = getClassListFromUI();
    
    // Set data attributes
    newPreviewEl.dataset.revealDuration = ui.duration.value;
    newPreviewEl.dataset.revealStagger = ui.stagger.value;
    newPreviewEl.dataset.revealEase = ui.ease.value;
    newPreviewEl.dataset.revealAmount = ui.amount.value;

    if (ui.exit.value !== 'none') {
        newPreviewEl.dataset.revealExit = ui.exit.value;
    }
    if (ui.exitDelay.value !== '0' && ui.exitDelay.value !== '') {
        newPreviewEl.dataset.revealExitDelay = ui.exitDelay.value;
    }
    
    // Replace the old element with the new one to trigger re-animation
    ui.previewContainer.querySelector('.js-previewText').replaceWith(newPreviewEl);

    // Re-initialize the animation library
    if (window.RevealInit) {
      RevealInit();
    }
  }

  // --- Event Listeners ---

  // Auto-update preview with rAF for performance
  let rafId = 0;
  const schedulePreview = () => {
    cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(applyPreview);
  };
  ui.panel.addEventListener('input', schedulePreview);

  // Manual replay button
  ui.btnPreview.addEventListener('click', applyPreview);
  
  // --- Modal Logic ---

  function generateExampleCode() {
    const classList = getClassListFromUI().replace('preview-text js-previewText', '').trim();
    
    let attributes = `\n  data-reveal-duration="${ui.duration.value}"`;
    attributes += `\n  data-reveal-stagger="${ui.stagger.value}"`;
    attributes += `\n  data-reveal-amount="${ui.amount.value}"`;
    attributes += `\n  data-reveal-ease="${ui.ease.value}"`;

    if (ui.exit.value !== 'none') {
        attributes += `\n  data-reveal-exit="${ui.exit.value}"`;
    }
    if (ui.exitDelay.value !== '0' && ui.exitDelay.value !== '') {
        attributes += `\n  data-reveal-exit-delay="${ui.exitDelay.value}"`;
    }

    return `<div class="${classList}"${attributes}>
  ${ui.text.value}
</div>`;
  }

  function openModal() {
    ui.exampleCode.textContent = generateExampleCode();
    ui.modal.style.display = 'flex';
  }

  function closeModal() {
    ui.modal.style.display = 'none';
  }

  ui.btnGenerate.addEventListener('click', openModal);
  ui.modalClose.addEventListener('click', closeModal);
  ui.modal.addEventListener('click', (e) => {
    if (e.target === ui.modal) closeModal();
  });
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && ui.modal.style.display === 'flex') {
      closeModal();
    }
  });

  // --- Copy to Clipboard Logic ---

  async function copyToClipboard(text, button) {
    const originalText = button.textContent;
    try {
      if (!navigator.clipboard) {
        throw new Error("Clipboard API not available.");
      }
      await navigator.clipboard.writeText(text);
      button.textContent = 'Copied!';
    } catch (err) {
      // Fallback for non-secure contexts (e.g., http) or older browsers
      try {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'absolute';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        button.textContent = 'Copied!';
      } catch (fallbackErr) {
        button.textContent = 'Failed!';
        console.error("Failed to copy to clipboard:", fallbackErr);
      }
    } finally {
      setTimeout(() => {
        button.textContent = originalText;
      }, 1500);
    }
  }

  ui.btnCopyCdn.addEventListener('click', () => {
    copyToClipboard(ui.cdnCode.textContent, ui.btnCopyCdn);
  });
  
  ui.btnCopyExample.addEventListener('click', () => {
    copyToClipboard(ui.exampleCode.textContent, ui.btnCopyExample);
  });

  // Initial render on page load
  applyPreview();
});
</script>

</body>
</html>