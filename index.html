<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Reveal Builder — Lightweight Animation Engine</title>

<style>
  :root{
    --bg:#0b1220;--panel:#141c2b;--muted:#9fb0c7;--text:#e6edf6;
    --accent:#22c55e;--accent2:#3b82f6;--border:#243047;--code:#0b1220;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Inter,Arial}
  .layout{display:flex;min-height:100vh}
  aside{width:400px;background:var(--panel);border-right:1px solid var(--border);padding:22px;display:flex;flex-direction:column;gap:16px}
  h1{margin:0 0 8px;font-size:18px;color:var(--muted);font-weight:700;letter-spacing:.3px}
  .group{display:grid;gap:8px}
  label{font-size:12px;color:#c7d3e5;font-weight:600}
  select,input,textarea{
    background:#101829;color:var(--text);border:1px solid var(--border);
    border-radius:8px;padding:10px 12px;font-size:14px;outline:none
  }
  input[type="number"]{appearance:textfield}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .actions{display:grid;gap:8px;margin-top:6px}
  button{
    background:var(--accent);color:#08111f;font-weight:800;border:0;padding:10px 12px;
    border-radius:9px;cursor:pointer;transition:transform .06s ease,opacity .2s ease
  }
  button:hover{opacity:.95} button:active{transform:translateY(1px)}
  .is-outline{background:transparent;color:var(--text);border:1px solid var(--border)}
  .is-blue{background:var(--accent2);color:#fff}
  main{flex:1;display:flex;align-items:center;justify-content:center;padding:28px}
  .preview{
    width:min(920px,100%);background:var(--panel);border:1px solid var(--border);border-radius:16px;
    padding:32px;min-height:300px;box-shadow:0 10px 30px rgba(0,0,0,.25)
  }
  .preview h2{margin:0 0 16px;color:#cfe0ff;font-size:16px;opacity:.9}
  .preview-text{
    background:#0e1729;border:1px dashed #2b3a57;color:#cfe0ff;padding:24px;border-radius:12px;
    font-size:2.25rem;line-height:1.25;letter-spacing:.2px
  }

  /* modal */
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);padding:20px;z-index:10}
  .sheet{width:min(980px,100%);background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:18px}
  .tabs{display:flex;gap:16px;border-bottom:1px solid var(--border);margin-bottom:10px}
  .tab{padding:8px 2px;cursor:pointer;color:#b7c6da;font-weight:700}
  .tab.is-active{color:var(--accent);border-bottom:2px solid var(--accent)}
  pre{background:var(--code);color:#d0e2ff;border:1px solid var(--border);border-radius:10px;padding:12px;overflow:auto;font-size:13px;line-height:1.5;max-height:60vh}
  .toolbar{display:flex;gap:8px;justify-content:flex-end;margin:8px 0 14px}
  .badge{display:inline-flex;gap:8px;align-items:center;font-size:12px;color:#9fb0c7}
  code.inline{background:#0e1628;border:1px solid var(--border);padding:1px 6px;border-radius:6px}
</style>
</head>
<body>
  <div class="layout">
    <aside>
      <div>
        <h1>Reveal — Builder</h1>

        <div class="group">
          <label>Animation Type</label>
          <select class="js-animType">
            <option value="fade">fade</option>
            <option value="slide">slide</option>
            <option value="scale">scale</option>
            <option value="rotate">rotate</option>
            <option value="bounce">bounce</option>
            <option value="blur">blur</option>
            <option value="clip">clip</option>
            <option value="underline">underline</option>
            <option value="shine">shine</option>
            <option value="desat">desat</option>
            <option value="type">type</option>
            <option value="scramble">scramble</option>
          </select>
        </div>

        <div class="row">
          <div class="group">
            <label>Mode</label>
            <select class="js-mode">
              <option value="element">element</option>
              <option value="word" selected>word</option>
              <option value="char">char</option>
            </select>
          </div>
          <div class="group">
            <label>Direction</label>
            <select class="js-direction">
              <option value="up">up</option><option value="down">down</option>
              <option value="left">left</option><option value="right">right</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="group">
            <label>Duration (ms)</label>
            <input class="js-duration" type="number" min="60" max="8000" value="700" />
          </div>
          <div class="group">
            <label>Stagger (ms)</label>
            <input class="js-stagger" type="number" min="0" max="1500" value="90" />
          </div>
        </div>

        <div class="row">
          <div class="group">
            <label>Easing (CSS)</label>
            <select class="js-ease">
              <option>ease-out</option><option>ease-in</option><option>ease-in-out</option><option>linear</option>
              <option value="cubic-bezier(0.16, 1, 0.3, 1)">springy</option>
              <option value="cubic-bezier(0.22, 1, 0.36, 1)">expo-out</option>
            </select>
          </div>
          <div class="group">
            <label>Amount (px/deg/%)*</label>
            <input class="js-amount" type="number" value="80" />
          </div>
        </div>

        <div class="row">
          <div class="group">
            <label>Stagger Pattern</label>
            <select class="js-pattern">
              <option value="sequential">sequential</option>
              <option value="centerOut">centerOut</option>
              <option value="random">random</option>
            </select>
          </div>
          <div class="group">
            <label>Exit Animation</label>
            <select class="js-exit">
              <option value="none">none</option>
              <option value="fadeOut">fadeOut</option>
              <option value="slideOut">slideOut</option>
              <option value="shrinkOut">shrinkOut</option>
              <option value="dissolveOut">dissolveOut</option>
            </select>
          </div>
        </div>

        <div class="group">
          <label>Exit Delay (ms)</label>
          <input class="js-exitDelay" type="number" value="0" />
        </div>

        <div class="group">
          <label>Preview Text</label>
          <textarea class="js-text" rows="2">Building lightweight animation libraries is fun and fast</textarea>
        </div>

        <div class="actions">
          <button class="js-preview is-outline">Preview</button>
          <button class="js-generate is-blue">Generate Code</button>
        </div>
      </div>

      <div class="badge">
        <span>Engine: <code class="inline">reveal</code> · No deps · Vanilla JS</span>
      </div>
    </aside>

    <main>
      <div class="preview">
        <h2>Preview</h2>
        <div class="preview-text js-previewText">
          Building lightweight animation libraries is fun and fast
        </div>
      </div>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal js-modal" role="dialog" aria-modal="true">
    <div class="sheet">
      <div class="tabs">
        <div class="tab is-active js-tab" data-tab="js">JS</div>
        <div class="tab js-tab" data-tab="css">CSS</div>
        <div class="tab js-tab" data-tab="how">How-to</div>
      </div>

      <div class="toolbar">
        <button class="is-outline js-copy">Copy</button>
        <button class="is-outline js-close">Close</button>
      </div>

      <pre class="js-content"></pre>
    </div>
  </div>

  <!-- ✅ latest fixed engine for live preview -->
  <script src="reveal-engine.js"></script>

  <script>
  const $ = (sel, root=document)=> root.querySelector(sel);
  const $$ = (sel, root=document)=> Array.from(root.querySelectorAll(sel));

  const ui = {
    type: $('.js-animType'),
    mode: $('.js-mode'),
    direction: $('.js-direction'),
    duration: $('.js-duration'),
    stagger: $('.js-stagger'),
    ease: $('.js-ease'),
    amount: $('.js-amount'),
    pattern: $('.js-pattern'),
    exit: $('.js-exit'),
    exitDelay: $('.js-exitDelay'),
    text: $('.js-text'),
    previewText: $('.js-previewText'),
    btnPreview: $('.js-preview'),
    btnGenerate: $('.js-generate'),
    modal: $('.js-modal'),
    modalContent: $('.js-content'),
    modalCopy: $('.js-copy'),
    modalClose: $('.js-close'),
    modalTabs: $$('.js-tab')
  };

  function buildClassListFromUI(){
    const cls = [];
    cls.push(`reveal-${ui.type.value}`);
    if(ui.mode.value === 'word') cls.push('reveal-word');
    else if(ui.mode.value === 'char') cls.push('reveal-char');
    cls.push(`reveal-${ui.direction.value}`);
    if(ui.pattern.value === 'random') cls.push('reveal-random');
    else if(ui.pattern.value === 'centerOut') cls.push('reveal-center');
    return cls.join(' ');
  }

  function applyPreview(){
    // reset preview text
    ui.previewText.innerHTML = ui.text.value;
    const classes = buildClassListFromUI();
    ui.previewText.setAttribute('class', `preview-text js-previewText ${classes}`);
    ui.previewText.dataset.revealDuration = ui.duration.value;
    ui.previewText.dataset.revealStagger = ui.stagger.value;
    ui.previewText.dataset.revealEase = ui.ease.value;
    ui.previewText.dataset.revealAmount = ui.amount.value;
    ui.previewText.dataset.revealExit = ui.exit.value;
    ui.previewText.dataset.revealExitDelay = ui.exitDelay.value;
    // run reveal engine again
    RevealInit();
  }

  ui.btnPreview.addEventListener('click', applyPreview);
  window.addEventListener('load', applyPreview);
  </script>
</body>
</html>
