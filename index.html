<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Reveal Builder — Lightweight Animation Engine</title>

<!-- Optional helpers CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ashfad0273/Entrance-Animation@main/reveal.css?v=3">
<!-- RevealEngine v2 -->
<script src="https://cdn.jsdelivr.net/gh/ashfad0273/Entrance-Animation@main/reveal-engine.min.js?v=2"></script>
<style>
:root{
  --bg:#0b1220;--panel:#141c2b;--muted:#9fb0c7;--text:#e6edf6;
  --accent:#22c55e;--accent2:#3b82f6;--border:#243047;--code:#0b1220;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Inter,Arial}
.layout{display:flex;min-height:100vh}
aside{width:400px;background:var(--panel);border-right:1px solid var(--border);padding:22px;display:flex;flex-direction:column;gap:16px}
h1{margin:0 0 8px;font-size:18px;color:var(--muted);font-weight:700;letter-spacing:.3px}
.group{display:grid;gap:8px}
label{font-size:12px;color:#c7d3e5;font-weight:600}
select,input,textarea{
  background:#101829;color:var(--text);border:1px solid var(--border);
  border-radius:8px;padding:10px 12px;font-size:14px;outline:none; width: 100%;
}
input[type="number"]{appearance:textfield}
.row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.actions{display:grid;gap:8px;margin-top:6px}
button{
  background:var(--accent);color:#08111f;font-weight:800;border:0;padding:10px 12px;
  border-radius:9px;cursor:pointer;transition:transform .06s ease,opacity .2s ease
}
button:hover{opacity:.95}button:active{transform:translateY(1px)}
.is-outline{background:transparent;color:var(--text);border:1px solid var(--border)}
.is-blue{background:var(--accent2);color:#fff}
.switch{display:flex;gap:10px;align-items:center}
.switch input{width:auto}
main{flex:1;display:flex;align-items:center;justify-content:center;padding:28px}
.preview{width:min(920px,100%);background:var(--panel);border:1px solid var(--border);border-radius:16px;
  padding:32px;min-height:300px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
.preview h2{margin:0 0 16px;color:#cfe0ff;font-size:16px;opacity:.9}
.preview-text{background:#0e1729;border:1px dashed #2b3a57;color:#cfe0ff;padding:24px;border-radius:12px;
  font-size:2.25rem;line-height:1.25;letter-spacing:.2px}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);padding:20px;z-index:10}
.sheet{width:min(980px,100%);background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:18px}
.tabs{display:flex;gap:16px;border-bottom:1px solid var(--border);margin-bottom:10px}
.tab{padding:8px 2px;cursor:pointer;color:#b7c6da;font-weight:700}
.tab.is-active{color:var(--accent);border-bottom:2px solid var(--accent)}
pre{background:var(--code);color:#d0e2ff;border:1px solid var(--border);border-radius:10px;padding:12px;overflow:auto;font-size:13px;line-height:1.5;max-height:60vh}
.toolbar{display:flex;gap:8px;justify-content:flex-end;margin:8px 0 14px}
.badge{display:inline-flex;gap:8px;align-items:center;font-size:12px;color:#9fb0c7}
code.inline{background:#0e1628;border:1px solid var(--border);padding:1px 6px;border-radius:6px}
.code-block {background:#0e1729;border:1px solid #2b3a57;color:#cfe0ff;padding:12px;border-radius:8px;font-family:ui-monospace,Menlo,monospace;font-size:13px;overflow:auto}
</style>
</head>
<body>

<div class="layout">
  <aside>
    <h1>Reveal — Builder</h1>

    <div class="group">
      <label>Animation Type</label>
      <select class="js-animType">
        <option>fade</option><option>slide</option><option>scale</option><option>rotate</option>
        <option>bounce</option><option>blur</option><option>clip</option><option>underline</option>
        <option>desat</option><option>type</option><option>scramble</option>
      </select>
    </div>

    <div class="row">
      <div class="group">
        <label>Mode</label>
        <select class="js-mode"><option>element</option><option selected>word</option><option>char</option></select>
      </div>
      <div class="group">
        <label>Direction</label>
        <select class="js-direction"><option>up</option><option>down</option><option>left</option><option>right</option></select>
      </div>
    </div>

    <div class="row">
      <div class="group">
        <label>Duration (ms)</label><input class="js-duration" type="number" value="700">
      </div>
      <div class="group">
        <label>Stagger (ms)</label><input class="js-stagger" type="number" value="90">
      </div>
    </div>

    <div class="row">
      <div class="group">
        <label>Easing</label>
        <select class="js-ease">
          <option>ease-out</option><option>ease-in</option><option>ease-in-out</option><option>linear</option>
          <option value="cubic-bezier(0.22,1,0.36,1)">cubic-bezier(0.22,1,0.36,1)</option>
        </select>
      </div>
      <div class="group">
        <label>Amount (px/deg)</label><input class="js-amount" type="number" value="80">
      </div>
    </div>

    <div class="row">
      <div class="group">
        <label>Delay (ms)</label><input class="js-delay" type="number" value="0">
      </div>
      <div class="group">
        <label>Exit</label>
        <select class="js-exit"><option value="">none</option><option value="fade">exit-fade</option><option value="slide">exit-slide</option><option value="shrink">exit-shrink</option><option value="dissolve">exit-dissolve</option></select>
      </div>
    </div>

    <div class="group">
      <label>Exit Delay (ms)</label><input class="js-exitDelay" type="number" value="0">
    </div>

    <div class="row">
      <label class="switch"><input class="js-scroll" type="checkbox" checked> <span>Scroll trigger</span></label>
      <label class="switch"><input class="js-once" type="checkbox"> <span>Play once</span></label>
    </div>

    <div class="group">
      <label>Preview Text</label>
      <textarea class="js-text" rows="2">Building lightweight animation libraries is fun and fast</textarea>
    </div>

    <div class="actions">
      <button class="js-preview is-outline">Preview</button>
      <button class="js-generate is-blue">Generate Code</button>
    </div>

    <div class="badge"><span>Engine: <code class="inline">.reveal</code> + <code class="inline">data-reveal</code> · Vanilla JS · No deps</span></div>
  </aside>

  <main>
    <div class="preview">
      <h2>Preview</h2>
      <div class="preview-text js-previewText reveal" data-reveal="fade up 700 90 ease-out amount-80 scroll">Building lightweight animation libraries is fun and fast</div>
    </div>
  </main>
</div>

<div class="modal js-modal">
  <div class="sheet">
    <h2 style="margin:0 0 8px;color:#9fb0c7;font-size:15px;">How to Use</h2>
    <div class="toolbar" style="margin-bottom:14px;">
      <button class="is-outline js-close">Close</button>
    </div>

    <div class="section">
      <p style="color:#cfe0ff;font-weight:600;">1️⃣ Include JS (and optional CSS) from CDN</p>
      <pre class="code-block"><code class="js-cdn-code">&lt;!-- Optional helpers CSS --&gt;
&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ashfad0273/Entrance-Animation@main/reveal.css?v=3"&gt;
&lt;!-- RevealEngine v2 --&gt;
&lt;script src="https://cdn.jsdelivr.net/gh/ashfad0273/Entrance-Animation@main/reveal-engine.min.js?v=2"&gt;&lt;/script&gt;</code></pre>
      <button class="is-outline js-copy-cdn">Copy CDN</button>
    </div>

    <div class="section" style="margin-top:18px;">
      <p style="color:#cfe0ff;font-weight:600;">2️⃣ Add one class + one attribute</p>
      <pre class="code-block"><code class="js-example-code"></code></pre>
      <button class="is-outline js-copy-example">Copy Example</button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const $ = (s, r = document) => r.querySelector(s);

  const ui = {
    type: $('.js-animType'),
    mode: $('.js-mode'),
    direction: $('.js-direction'),
    duration: $('.js-duration'),
    stagger: $('.js-stagger'),
    ease: $('.js-ease'),
    amount: $('.js-amount'),
    delay: $('.js-delay'),
    exit: $('.js-exit'),
    exitDelay: $('.js-exitDelay'),
    scroll: $('.js-scroll'),
    once: $('.js-once'),
    text: $('.js-text'),
    previewContainer: $('.preview'),
    btnPreview: $('.js-preview'),
    btnGenerate: $('.js-generate'),
    modal: $('.js-modal'),
    modalClose: $('.js-close'),
    panel: $('aside'),
    cdnCode: $('.js-cdn-code'),
    exampleCode: $('.js-example-code'),
    btnCopyCdn: $('.js-copy-cdn'),
    btnCopyExample: $('.js-copy-example'),
  };

  const originalPreviewEl = $('.js-previewText');

  // Build data-reveal token string from UI
  function buildTokens() {
    const tokens = [];
    tokens.push(ui.type.value);                 // type
    tokens.push(ui.direction.value);            // direction
    tokens.push(String(Math.max(0, +ui.duration.value || 0))); // duration
    tokens.push(String(Math.max(0, +ui.stagger.value || 0)));  // stagger
    tokens.push(ui.ease.value);                 // easing

    const amt = +ui.amount.value || 0;
    if (amt) tokens.push(`amount-${amt}`);

    const delay = +ui.delay.value || 0;
    if (delay) tokens.push(`delay-${delay}`);

    // mode
    const m = ui.mode.value;
    if (m === 'word' || m === 'char') tokens.push(m);

    // exits
    const ex = ui.exit.value;
    if (ex) tokens.push(`exit-${ex}`);
    const exd = +ui.exitDelay.value || 0;
    if (exd) tokens.push(`exit-delay-${exd}`);

    // scroll + once
    if (ui.scroll.checked) tokens.push('scroll'); else tokens.push('no-scroll');
    if (ui.once.checked) tokens.push('once');

    return tokens.join(' ');
  }

  // Construct a .reveal element for preview
  function makePreviewEl() {
    const el = originalPreviewEl.cloneNode(false);
    el.className = 'preview-text js-previewText reveal';
    el.textContent = ui.text.value;
    el.setAttribute('data-reveal', buildTokens());
    return el;
  }

  function applyPreview() {
    const newEl = makePreviewEl();
    ui.previewContainer.querySelector('.js-previewText').replaceWith(newEl);
    // tell engine to (re)parse
    if (window.RevealEngine && typeof RevealEngine.refresh === 'function') {
      RevealEngine.refresh(ui.previewContainer);
    } else if (window.RevealEngine && typeof RevealEngine.init === 'function') {
      RevealEngine.init(ui.previewContainer);
    }
  }

  // Modal example block
  function generateExampleCode() {
    const tokens = buildTokens();
    const html = `<div class="reveal" data-reveal="${tokens}">
  ${ui.text.value}
</div>`;
    return html;
  }

  function openModal() {
    ui.exampleCode.textContent = generateExampleCode();
    ui.modal.style.display = 'flex';
  }
  function closeModal() { ui.modal.style.display = 'none'; }

  // Events
  let rafId = 0;
  const schedulePreview = () => { cancelAnimationFrame(rafId); rafId = requestAnimationFrame(applyPreview); };
  ui.panel.addEventListener('input', schedulePreview);
  ui.btnPreview.addEventListener('click', applyPreview);
  ui.btnGenerate.addEventListener('click', openModal);
  ui.modalClose.addEventListener('click', closeModal);
  ui.modal.addEventListener('click', (e) => { if (e.target === ui.modal) closeModal(); });
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && ui.modal.style.display === 'flex') closeModal(); });

  async function copyToClipboard(text, button) {
    const originalText = button.textContent;
    try {
      if (!navigator.clipboard) throw new Error("Clipboard API not available.");
      await navigator.clipboard.writeText(text);
      button.textContent = 'Copied!';
    } catch (err) {
      try {
        const ta = document.createElement('textarea');
        ta.value = text; ta.style.position='absolute'; ta.style.left='-9999px';
        document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove();
        button.textContent = 'Copied!';
      } catch (fallbackErr) {
        button.textContent = 'Failed!';
        console.error("Failed to copy:", fallbackErr);
      }
    } finally {
      setTimeout(() => { button.textContent = originalText; }, 1500);
    }
  }
  ui.btnCopyCdn.addEventListener('click', () => copyToClipboard(ui.cdnCode.textContent, ui.btnCopyCdn));
  ui.btnCopyExample.addEventListener('click', () => copyToClipboard(ui.exampleCode.textContent, ui.btnCopyExample));

  // Initial
  applyPreview();
});
</script>
</body>
</html>
